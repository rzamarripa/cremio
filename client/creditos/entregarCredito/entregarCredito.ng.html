
<div class="row">
	<div class="col-sm-12">
			<div class="col-sm-6">
					<h2>Entregar Crédito</h2>
			</div>
			<div class="col-sm-6">
					<a ui-sref="root.clienteDetalle({objeto_id: ecCtrl.cliente._id})" class="btn txt-color-white bg-color-teal btn-sm pull-right"><i class="fa fa-user"></i> Ir a mi perfil</a>		
			</div>		
	</div>
</div>	

<div class="row">
  <div class="col-sm-12">
    <div ng-show = "ecCtrl.verDiaPago">
      <div class="well">      
          <div class="row ">
            <div class="col-sm-3" ng-if="ecCtrl.credito.periodoPago == 'Semanal'" valida>
              <label>Día preferido de pago *</label>
              <select name="diaPreferidoPago" class="form-control" ng-change="ecCtrl.fechaPago(ecCtrl.credito.diaPreferidoPago, ecCtrl.credito.periodoPago)" ng-model="ecCtrl.credito.diaPreferidoPago">
                <option value="1">Lunes</option>
                <option value="2">Martes</option>
                <option value="3">Miércoles</option>
                <option value="4">Jueves</option>
                <option value="5">Viernes</option>
                <option value="6">Sábado</option>
              </select>
            </div>
            <div class="col-sm-3" valida>
              <label>Primer abono</label>
              <input date-time format="dd-MM-yyyy" class="form-control" view="date" max-view="year" min-view="date" ng-model="ecCtrl.objeto.primerAbono" name="fechaPrimerAbono"/>
            </div>
            <div class="col-sm-3">            
								<br>
								<button class="btn btn-success" ng-click="ecCtrl.generarCredito()">Generar Crédito</button>	            
            </div>  
          </div>
         
      </div>
    </div>
    <div ng-show = "!ecCtrl.verDiaPago">
        <form name="form" class="form-horizontal" role="form">
            <div class="well">      
              <div class="row ">
                <div class="col-sm-3">
									<label >Forma de pago</label>
									<select name="tiposIngresos" class="form-control select2" placeholder="Seleccione" ng-model="ecCtrl.tipoIngreso._id" required>
										<option value="{{tipoIngreso._id}}" ng-repeat="tipoIngreso in ecCtrl.tiposIngreso">{{tipoIngreso.nombre}}</option>
									</select>
									<input name="tipo._id" type="number" class="form-control" placeholder="Monto" ng-model="ecCtrl.objeto.caja[ecCtrl.tipoIngreso._id].saldo" ng-change="ecCtrl.calcular()"  required>
                </div>
                <div class="col-sm-8">
                <div class="row">
                    <div class="col-sm-6 checkbox" >
                  <label>
                  <input type="checkbox"  ng-model="ecCtrl.validar.contrato" name="contrato" required> Contrato de Préstamo y Garantía Prendaria.*
                </label>
                </div>
                <div class="col-sm-6 checkbox" >
	                <label>
	                  <input type="checkbox" ng-model="ecCtrl.validar.ficha" name="ficha" required> Ficha de Información del Cliente.*
	                </label>
                </div>
              </div>
              <div class="row ">
                <div class="col-sm-6 checkbox" >
                  <label>
                  <input type="checkbox"  ng-model="ecCtrl.validar.pagare" name="págare" required> Pagare.*
                </label>
                </div>
                <div class="col-sm-6 checkbox" >
	                <label>
	                  <input type="checkbox"  ng-model="ecCtrl.validar.tabla" name="tabla" required> Tabla de Amortización.*
	                </label>
                </div>
              </div>
               <div class="row "> 
                    <div class="col-sm-4" ng-show="ecCtrl.imprecion"><br/>   
												<input class="btn btn-success" type="button" ng-click="ecCtrl.imprimirContrato(ecCtrl.credito,ecCtrl.cliente);ecCtrl.generarPlanPagos(rc.credito)" value="Imprimir" ng-if="currentUser.roles[0] == 'Gerente' || currentUser.roles[0] == 'Cajero'"  />
              </div>
            </div>
              </div>
              </div>
          </div>
          <div class="well">      
            <div class="row">
              <div class="col-sm-4">
                <h1>
                Crédito Solicitado:
                </h1>
              </div>
              <div class="col-sm-4">
                <h1>
                {{ecCtrl.credito.capitalSolicitado | currency}}
                </h1>
              </div>
            </div>
            <div class="row" ng-if="ecCtrl.credito.esRefinanciado">
              <div class="col-sm-4">
                <h1>
                Monto Refinanciado:
                </h1>
              </div>
              <div class="col-sm-4">
                <h1>
                {{ecCtrl.credito.refinanciar | currency}}
                </h1>
              </div>
            </div>
            <div class="row" ng-if="ecCtrl.credito.esRefinanciado">
              <div class="col-sm-4">
                <h1>
                Monto a Entregar:
                </h1>
              </div>
              <div class="col-sm-4">
                <h1>
                {{ecCtrl.credito.capitalSolicitado - ecCtrl.credito.refinanciar | currency}}
                </h1>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-4">
                <h1>
                Monto Entregado:
                </h1>
              </div>
              <div class="col-sm-4">
                <h1>
                {{ecCtrl.suma | currency}}
                </h1>
              </div>
            </div
            <br/>
            <br/>
            <div class="row">
                <div class="col-sm-12" ng-show="!ecCtrl.credito.vale">
                  <input type="submit" ng-click="ecCtrl.guardar(ecCtrl.objeto,form)" value="Entregar Credito" class="btn btn-primary" valida-form formulario="form">
                </div>
                <div class="col-sm-12" ng-show="ecCtrl.credito.vale" >
                  <input type="submit" ng-click="ecCtrl.guardar(ecCtrl.objeto,form)" value="Entregar Vale" class="btn btn-primary" valida-form formulario="form">
                </div>
            </div>
          </div>  
        </form>
      </div>  
  </div>
</div>


<!--     //////////////////////////////////////////////////////////// -->

<a id='dwnldLnk' href="#" download='documentos.docx' style="display:none;" hidden="true"></a>   
    